{% extends 'base.html' %}
{% block content %}
<h2>{% if build %}‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–±–æ—Ä–∫—É{% else %}‚ûï –°–æ–∑–¥–∞—Ç—å —Å–±–æ—Ä–∫—É{% endif %}</h2>

{% if messages %}
  {% for message in messages %}
    <div class="alert alert-{{ message.tags }} alert-dismissible fade show">
      {{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
  {% endfor %}
{% endif %}

<form method="post">
  {% csrf_token %}
  <div class="mb-3">
    <label for="name" class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ —Å–±–æ—Ä–∫–∏</label>
    <input type="text" name="name" id="name" class="form-control" 
           value="{% if build %}{{ build.name }}{% endif %}" required>
  </div>

  <h4>–í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</h4>
  <div class="row">
  {% for comp in components %}
    <div class="col-md-6 mb-2">
      <div class="form-check">
        <input class="form-check-input" type="checkbox" 
               name="components" value="{{ comp.id }}" 
               id="comp_{{ comp.id }}"
               {% if selected_ids and comp.id in selected_ids %}checked{% endif %}>
        <label class="form-check-label" for="comp_{{ comp.id }}">
          <strong>{{ comp.name }}</strong> ‚Äî {{ comp.price }} ‚ÇΩ 
          <br><small class="text-muted">{{ comp.category }}{% if comp.socket %} ‚Ä¢ {{ comp.socket }}{% endif %}</small>
        </label>
      </div>
    </div>
  {% endfor %}
  </div>

  <button type="submit" class="btn btn-{% if build %}warning{% else %}success{% endif %} mt-3">
    {% if build %}üîÑ –û–±–Ω–æ–≤–∏—Ç—å —Å–±–æ—Ä–∫—É{% else %}‚úÖ –°–æ–∑–¥–∞—Ç—å —Å–±–æ—Ä–∫—É{% endif %}
  </button>
  <a href="{% url 'presets' %}" class="btn btn-outline-secondary mt-3 ms-2">üéØ –ì–æ—Ç–æ–≤—ã–µ —Å–±–æ—Ä–∫–∏</a>
</form>
{% endblock %}