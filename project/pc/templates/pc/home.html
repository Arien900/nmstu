<!-- pc/templates/pc/home.html -->
{% extends 'base.html' %}

{% block content %}
<h2>üî• –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä —Å–±–æ—Ä–∫–∏ –ü–ö</h2>

{% if user_role == 'guest' %}
    <div class="alert alert-info">
        –í—ã –≤–æ—à–ª–∏ –∫–∞–∫ <strong>–ì–æ—Å—Ç—å</strong>. 
        <a href="{% url 'register' %}" class="alert-link">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å</a>, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–±–æ—Ä–∫–∏.
    </div>
{% endif %}

<h3>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã</h3>
<div class="row">
{% for component in components %}
    <div class="col-md-6 col-lg-4 mb-3">
        <div class="card h-100">
            <div class="card-body">
                <h5 class="card-title">{{ component.name }}</h5>
                <p class="card-text">
                    <small class="text-muted">{{ component.category }}</small><br>
                    {{ component.description|truncatewords:10 }}
                </p>
                <p class="h5 text-success">{{ component.price }} ‚ÇΩ</p>
            </div>
        </div>
    </div>
{% empty %}
    <p>–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç.</p>
{% endfor %}
</div>

{% if user.is_authenticated and user.role != 'guest' %}
    <hr>
    <h3>–í–∞—à–∏ —Å–±–æ—Ä–∫–∏</h3>
    {% if builds %}
        <ul class="list-group">
        {% for build in builds %}
            <li class="list-group-item d-flex justify-content-between">
                <strong>{{ build.name }}</strong>
                <span>{{ build.total_price }} ‚ÇΩ</span>
            </li>
        {% endfor %}
        </ul>
    {% else %}
        <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç —Å–±–æ—Ä–æ–∫. <a href="{% url 'create_build' %}">–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é</a>.</p>
    {% endif %}
    <a href="{% url 'create_build' %}" class="btn btn-primary mt-3">‚ûï –°–æ–∑–¥–∞—Ç—å —Å–±–æ—Ä–∫—É</a>
{% endif %}
{% endblock %}