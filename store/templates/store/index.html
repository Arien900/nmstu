{% extends "store/base.html" %}
{% load static %}
{% block title %}Каталог — Clothes Shop{% endblock %}
{% block content %}
<h2>Каталог товаров</h2>

<div class="products">
  {% for product in products %}
    <div class="card">
      <img src="{% static product.image %}" alt="{{ product.name }}" class="thumb">
      <h3><a href="{% url 'store:product_detail' product.id %}">{{ product.name }}</a></h3>
      <p>{{ product.description }}</p>
      <p>Цена: {{ product.price }} руб.</p>
      {% if product.id in favorites %}
        <button id="fav-btn-{{ product.id }}" onclick="toggleFavorite({{ product.id }});">Убрать из избранного</button>
      {% else %}
        <button id="fav-btn-{{ product.id }}" onclick="toggleFavorite({{ product.id }});">Добавить в избранное</button>
      {% endif %}
    </div>
  {% empty %}
    <p>Товары отсутствуют.</p>
  {% endfor %}
</div>

<hr>
<h3>Последние страницы</h3>
<ul>
  {% for p in last_pages %}
    <li><a href="{{ p }}">{{ p }}</a></li>
  {% empty %}
    <li>Нет посещений</li>
  {% endfor %}
</ul>

{% endblock %}